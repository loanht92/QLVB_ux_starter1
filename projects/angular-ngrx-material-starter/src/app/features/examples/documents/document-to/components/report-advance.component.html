<div class="row" style="display:inline">
    <div fxFlexFill fxLayout="column" class=" form-input">
    </div>
    <div class="form-input" fxLayout="column" *ngIf="showList">
        <div class="caption" fxFlexFill>
            <span class="d-flex justify-content-between align-items-baseline">
                <h5>Tìm kiếm nâng cao</h5>
            </span>
        </div>
        <div fxFlexFill fxLayout="column">
            <div fxLayout="row" fxLayout.xs="column" fxFlexFill fxLayoutGap="10px">
                <mat-form-field fxFlex="50">
                    <mat-label>Sổ văn bản</mat-label>
                    <mat-select [(ngModel)]="bookType">
                        <mat-option>--- Chọn ---</mat-option>
                        <mat-option *ngFor="let item of ListBookType" value={{item.id}}>{{item.title}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field fxFlex="50">
                    <mat-label>Loại văn bản</mat-label>
                    <mat-select [(ngModel)]="docType">
                        <mat-option>--- Chọn ---</mat-option>
                        <mat-option *ngFor="let item of ListDocType" value={{item.id}}>{{item.title}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxFlexFill fxLayoutGap="10px">
                <mat-form-field fxFlex="50">
                    <input matInput placeholder="Số đến" [(ngModel)]="numberTo">
                </mat-form-field>
                <mat-form-field fxFlex="50">
                    <input matInput placeholder="Số ký hiệu" [(ngModel)]="numberOfSymbol">
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxFlexFill fxLayoutGap="10px">
                <mat-form-field fxFlex="50">
                    <mat-label>Ngày đến, từ ngày</mat-label>
                    <input matInput [matDatepicker]="picker3" (click)="picker3.open()" [(ngModel)]="dateFrom" (keypress)="validateQty($event)">
                    <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                    <mat-datepicker #picker3 disabled="false"></mat-datepicker>
                </mat-form-field>
                <mat-form-field fxFlex="50">
                    <mat-label>đến ngày</mat-label>
                    <input matInput [matDatepicker]="picker4" (click)="picker4.open()" [(ngModel)]="dateTo" (keypress)="validateQty($event)">
                    <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                    <mat-datepicker #picker4 disabled="false"></mat-datepicker>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxFlexFill fxLayoutGap="10px">
                <mat-form-field fxFlex="50">
                    <mat-label>Ngày ban hành, từ ngày</mat-label>
                    <input matInput [matDatepicker]="picker" (click)="picker.open()" [(ngModel)]="promulgatedFrom" (keypress)="validateQty($event)">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker disabled="false"></mat-datepicker>
                </mat-form-field>
                <mat-form-field fxFlex="50">
                    <mat-label>đến ngày</mat-label>
                    <input matInput [matDatepicker]="picker2" (click)="picker2.open()" [(ngModel)]="promulgatedTo" (keypress)="validateQty($event)">
                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                    <mat-datepicker #picker2 disabled="false"></mat-datepicker>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxFlexFill fxLayoutGap="10px">
                <mat-form-field fxFlex="50">
                    <input matInput placeholder="Người ký" [(ngModel)]="singer">
                </mat-form-field>
                <mat-form-field fxFlex="50">
                    <input matInput placeholder="Đơn vị ban hành" [(ngModel)]="source">
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxFlexFill fxLayoutGap="10px">
                <mat-form-field fxFlex="50">
                    <mat-label>Độ khẩn</mat-label>
                    <mat-select [(ngModel)]="urgentLevel">
                        <mat-option>--- Chọn ---</mat-option>
                        <mat-option *ngFor="let item of ListSecret" value={{item.id}}>{{item.title}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field fxFlex="50">
                    <mat-label>Độ mật</mat-label>
                    <mat-select [(ngModel)]="secretLevel">
                        <mat-option>--- Chọn ---</mat-option>
                        <mat-option *ngFor="let item of ListUrgent" value={{item.id}}>{{item.title}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxFlexFill fxLayoutGap="10px">
                <mat-form-field fxFlex="50">
                    <mat-label>Trạng thái</mat-label>
                    <mat-select [(ngModel)]="statusDoc">
                        <!-- <mat-option>--- Chọn ---</mat-option> -->
                        <mat-option *ngFor="let item of ListStatus" value={{item.code}}>{{item.title}}</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field fxFlex="50">
                    <input type="text" placeholder="Người xử lý" aria-label="ListUserApprover" matInput [formControl]="userApprover" [matAutocomplete]="auto">
                    <mat-autocomplete #auto="matAutocomplete" [displayWith]="onDisplayValue">
                        <mat-option *ngFor="let option of filteredOptions | async" [value]="option">{{option.UserName}}</mat-option>
                    </mat-autocomplete>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxFlexFill fxLayoutGap="10px">
                <mat-form-field fxFlex="50">
                    <input matInput placeholder="Trích yếu" [(ngModel)]="compendium">
                </mat-form-field>
                <div class="div-checkbox" fxFlex="50" fxLayoutAlign="start end">
                    <section class="example-section">
                        <mat-checkbox class="example-margin" [(ngModel)]="isAttachment">Văn bản không có file đính kèm</mat-checkbox> &nbsp;
                    </section>
                </div>
            </div>
            <div fxLayout="row" fxLayout.xs="column" fxFlexFill fxLayoutGap="5px" fxLayoutAlign="end stretch">
                <button mat-raised-button color="primary" type="button" (click)=getAllListRequest()> <mat-icon>search</mat-icon>&nbsp; <span >Tìm kiếm</span></button>
                <button mat-raised-button color="warn" type="button" (click)="resetForm()"> <i class="material-icons">cached</i>&nbsp; <span >Làm mới</span></button>
            </div>
        </div>
    </div>
    <div style="margin-top: 20px" *ngIf="showList"></div>
    <div fxFlexFill fxLayoutAlign="end" class="form-input">
        <button mat-stroked-button type="button" color="primary" style="margin-right: 10px" (click)="showList = !showList" matTooltip="Tìm kiếm nâng cao" matTooltipClass="example-tooltip-red">
            <mat-icon>zoom_in</mat-icon>
        </button>
        <input class="docadd-filter" fxFlex="300px" style="border-width: 2px !important;" fxLayout matInput (keyup)="applyFilter($event.target.value)" placeholder="Tìm kiếm">
    </div>
    <div fxFlexFill class="form-input">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <ng-container matColumnDef="numberTo">
                <th mat-header-cell *matHeaderCellDef style="width: 80px;"> Số đến </th>
                <td mat-cell *matCellDef="let element">{{element.numberTo}}</td>
            </ng-container>
            <ng-container matColumnDef="numberSymbol">
                <th mat-header-cell *matHeaderCellDef style="min-width: 100px;"> Số ký hiệu </th>
                <td mat-cell *matCellDef="let element">{{element.numberSymbol}}</td>
            </ng-container>
            <ng-container matColumnDef="created">
                <th mat-header-cell *matHeaderCellDef style="width: 100px;"> Ngày tạo </th>
                <td mat-cell *matCellDef="let element">{{element.created}}</td>
            </ng-container>
            <ng-container matColumnDef="userRequest">
                <th mat-header-cell *matHeaderCellDef style="max-width: 170px;"> Người tạo </th>
                <td mat-cell *matCellDef="let element">{{element.userRequest}}</td>
            </ng-container>
            <ng-container matColumnDef="userApprover">
                <th mat-header-cell *matHeaderCellDef style="max-width: 170px;"> Người xử lý </th>
                <td mat-cell *matCellDef="let element">{{element.userApprover}}</td>
            </ng-container>
            <ng-container matColumnDef="deadline">
                <th mat-header-cell *matHeaderCellDef style="width: 100px;"> Hạn xử lý </th>
                <td mat-cell *matCellDef="let element">{{element.deadline}}</td>
            </ng-container>
            <ng-container matColumnDef="compendium">
                <th mat-header-cell *matHeaderCellDef style="max-width: 500px;"> Trích yếu </th>
                <td mat-cell *matCellDef="let element">{{element.compendium}}</td>
            </ng-container>
            <!-- <ng-container matColumnDef="content">
                <th mat-header-cell *matHeaderCellDef> Nội dung xử lý </th>
                <td mat-cell *matCellDef="let element">{{element.note}}</td>
            </ng-container> -->
            <ng-container matColumnDef="sts">
                <th mat-header-cell *matHeaderCellDef style="width: 120px;"> Trạng thái </th>
                <td mat-cell *matCellDef="let element">
                    <p class="{{element.sts}}">{{element.status}}</p>
                </td>
            </ng-container>
            <ng-container matColumnDef="flag">
                <th mat-header-cell *matHeaderCellDef style="width: 50px;"></th>
                <td mat-cell *matCellDef="let element">
                    <mat-icon style="font-size: 22px; color: red;">{{element.flag}}</mat-icon>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="ClickItem(row, modalTemp)" class="example-element-row">
            </tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
    </div>

    <ng-template #modalTemp>
        <div class="modal-header">
            <h5 class="modal-title pull-left">Văn bản đã bị thu hồi</h5>
            <button type="button" class="close pull-right" aria-label="Close" (click)="bsModalRef.hide()">
                    <span aria-hidden="true">&times;</span>
                  </button>
        </div>
        <div class="modal-body" fxLayout="column">
            <div class="example-container mat-elevation-z8">
                <table mat-table [dataSource]="dataSource2">
                    <ng-container matColumnDef="department">
                        <th mat-header-cell *matHeaderCellDef> Đơn vị thu hồi </th>
                        <td mat-cell *matCellDef="let element"> {{element.Department}} </td>
                    </ng-container>
                    <ng-container matColumnDef="userName">
                        <th mat-header-cell *matHeaderCellDef> Người thu hồi </th>
                        <td mat-cell *matCellDef="let element"> {{element.UserName}} </td>
                    </ng-container>
                    <ng-container matColumnDef="time">
                        <th mat-header-cell *matHeaderCellDef> Thời gian thu hồi </th>
                        <td mat-cell *matCellDef="let element"> {{element.TimeRetrieve}} </td>
                    </ng-container>
                    <ng-container matColumnDef="reason">
                        <th mat-header-cell *matHeaderCellDef> Lý do thu hồi </th>
                        <td mat-cell *matCellDef="let element"> {{element.Reason}} </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns2; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
                </table>
            </div>
        </div>
        <div class="modal-footer" fxLayoutAlign="center center">
            <button mat-stroked-button color="primary" type="button" class="MR5" (click)="bsModalRef.hide()" style="width: 100px"><i class="material-icons">close</i>&nbsp; Đóng</button>
        </div>
    </ng-template>
</div>